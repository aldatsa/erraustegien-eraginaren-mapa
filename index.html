<!doctype html>

<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" href="css/leaflet.css" />
        <link rel="stylesheet" href="css/leaflet.label.css" />
        <link rel="stylesheet" href="css/estiloa.css" />
    </head>
    <body>
        <div id="bistaratze-aukerak">
            <label for="zubieta">Zubieta</label>
            <input type="checkbox" id="zubieta" checked>
            <label for="rezola">Rezola</label>
            <input type="checkbox" id="rezola" checked>
            <label for="zabalgarbi">Zabalgarbi</label>
            <input type="checkbox" id="zabalgarbi" checked>
        </div>
        <div id="mapa"></div>
        <div id="kredituak">
            <a href="http://www.argia.eus/" target="_blank"><img id="argia" src="img/argia.jpg"></a>
            <a href="http://www.iametza.eus/" target="_blank"><img id="iametza" src="img/iametza.png"></a>
            <div id="egilea">Infografia: <strong>Asier Iturralde Sarasola</strong> <a href="http://aldatsa.eus" target="_blank">@aldatsa</a></div>
            <div><a href="https://github.com/aldatsa/erraustegien-eraginaren-mapa" target="_blank">Iturburu kodea eta datuak (GPL/CC-BY-SA)</a></div>
        </div>
        <script src="js/leaflet.js"></script>
        <script src="js/leaflet.label.js"></script>
        <script src="js/erraustegiak.js"></script>
        <script>
            var mapa = L.map('mapa').setView([43.183376, -2.478662], 10);

            var zirkuluak = [{
                distantzia: 5000,
                opakotasuna: 0.35
            }, {
                distantzia: 10000,
                opakotasuna: 0.25
            }, {
                distantzia: 15000,
                opakotasuna: 0.2
            }, {
                distantzia: 20000,
                opakotasuna: 0.15
            }];

            var erraustegiak = {
                "Zubieta": {
                    izena: "Zubieta",
                    koordenatuak: [43.256308, -2.040659]
                },
                "Rezola": {
                    izena: "Rezola",
                    koordenatuak: [43.285839, -1.997300]
                },
                "Zabalgarbi": {
                    izena: "Zabalgarbi",
                    koordenatuak: [43.250402, -2.968665]
                }
            }

            var zubieta = new Erraustegia(mapa, erraustegiak["Zubieta"]);

            var rezola = new Erraustegia(mapa, erraustegiak["Rezola"]);

            var zabalgarbi = new Erraustegia(mapa, erraustegiak["Zabalgarbi"]);

            var MapQuestOpen_OSM = L.tileLayer('http://otile{s}.mqcdn.com/tiles/1.0.0/{type}/{z}/{x}/{y}.{ext}', {
            	type: 'map',
            	ext: 'jpg',
            	attribution: 'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data &copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>',
            	subdomains: '1234'
            });
            MapQuestOpen_OSM.addTo(mapa);

            zubieta.marraztuZirkuluak(zirkuluak);

            rezola.marraztuZirkuluak(zirkuluak);

            zabalgarbi.marraztuZirkuluak(zirkuluak);

            document.getElementById("zubieta").addEventListener("click", function(event) {

                var checkbox = event.target;

                if (checkbox.checked) {
                    zubieta.marraztuZirkuluak(zirkuluak);
                } else {
                    zubieta.ezabatuZirkuluak();
                }
            });

            document.getElementById("rezola").addEventListener("click", function(event) {

                var checkbox = event.target;

                if (checkbox.checked) {
                    rezola.marraztuZirkuluak(zirkuluak);
                } else {
                    rezola.ezabatuZirkuluak();
                }
            });

            document.getElementById("zabalgarbi").addEventListener("click", function(event) {

                var checkbox = event.target;

                if (checkbox.checked) {
                    zabalgarbi.marraztuZirkuluak(zirkuluak);
                } else {
                    zabalgarbi.ezabatuZirkuluak();
                }
            });
        </script>
    </body>
</html>
